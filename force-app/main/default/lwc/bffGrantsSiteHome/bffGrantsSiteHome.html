<template>
    <div lang={langTag}>

        <!-- HEADER -->
        <header class="slds-global-header_container bff-header-container">
            <div class="slds-global-header slds-grid bff-global-header slds-grid_align-spread">
                <div class="slds-global-header__item">
                    <img class="bff-logo-header" src={bffLogoWhiteText} alt="Black Feminist Fund Logo"> <!-- Make this a link if we navigate home -->
                </div>
                <div class="slds-global-header__item">
                    <lightning-button-menu 
                        alternative-text="Show menu" 
                        icon-name="utility:settings" 
                        variant="border-inverse"
                        menu-alignment="auto"
                        onselect={handleMenuSelect}>
                            <lightning-menu-item 
                                value="GetHelp" 
                                label={support} 
                                href="mailto:BFFgrant-helpdesk@blackfeministfund.org?Subject=Question about Grants Site" 
                                target="_blank">
                            </lightning-menu-item>
                            <lightning-menu-item 
                                value="Logout" 
                                label={logout}
                                onclick={handleLogout}>
                            </lightning-menu-item>
                    </lightning-button-menu>
                </div>
            </div>
        </header>

        <!-- Language Picker -->
        <div class="slds-grid slds-grid_align-end slds-gutters_x-large topmargin">
            <div class="slds-col">
                <div class="slds-form-element">
                    <label class="slds-form-element__label visually-hidden" for="langPicker">Language</label>
                    <div class="slds-form-element__control">
                        <div class="slds-select_container">
                            <select class="slds-select" id="langPicker" name="langPicker" onchange={handleLanguagePicker}>
                                <template for:each={options} for:item="option">
                                    <option key={option.value} value={option.value}>{option.label}</option>
                                </template>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    <!-- TOAST BANNER -->
    <div if:false={hasSubmittedPrf}>
        <c-lwc-toast-banner message={bannerProfile}></c-lwc-toast-banner>           
    </div>

    <!-- LOGO -->
    <div class="slds-grid slds-grid_align-center slds-gutters_large">
        <div class="slds-col">
            <div class="logo-home-page">
                <span class="slds-assistive-text">Black Feminist Fund Logo</span>
                <img class="bff-logo-center" src={bffLogo}>
            </div>
        </div>
    </div>

    <!-- WELCOME -->
    <div if:true={dataLoaded}>
        <div class="slds-grid slds-grid_align-center slds-gutters_large">
            <div class="slds-col">
                <div class="slds-text-heading_large slds-var-m-top_x-large"><h1>{pageHeader}</h1></div>
                <section aria-label="Intro">
                    <div class="slds-text-heading_medium slds-var-m-bottom_medium">{pageSubheader}</div>
                </section>
            </div>
        </div>

        <!-- PROFILE BUTTON -->
        <div class="slds-grid slds-grid_align-center slds-gutters_xx-large">
            <div class="slds-col">
                <lightning-button
                    variant="brand"
                    label={prfButtonLabel}
                    title={prfButtonLabel}
                    onclick={handleNewProfile}
                    class="slds-var-m-left_small bff-button-brand"
                    >
                </lightning-button>
            </div>
        </div>

        <!-- GRANT DESCRIPTION -->
        <div class="slds-grid slds-gutters_xx-large">
            <div class="slds-col">
                <div class="slds-text-heading_medium slds-var-m-top_large slds-var-m-bottom_small"><h2>{grantHeading}</h2></div>
                <div class="slds-text-heading_medium slds-var-m-bottom_medium">
                    <p>{grantSubHeading}</p>
                </div>
                <div class="slds-text-heading_medium slds-var-m-bottom_medium">
                    <ul class="slds-list_dotted">
                        <li class="slds-var-m-bottom_medium">
                            <strong>{sustainFundHeading}</strong>
                            &nbsp;{sustainFundDetails}
                        </li>
                        <li class="slds-var-m-bottom_medium">
                            <strong>{solidarityFundHeading}</strong>
                            &nbsp;{solidarityFundDetails}
                        </li>
                    </ul>
                </div>
                <div class="slds-text-heading_medium slds-var-m-bottom_medium">
                    <p>{grantEligibility}</p>
                </div>
            </div>
        </div>

        <div>debug: {debug}</div>
        <!-- <div>Language: {language}</div>
        <div>Lang tag: {langTag}</div>
        <div>Form instance Id: {prFormInstanceId}</div>-->
        <!-- <div>AppFormInstanceId: {appFormInstanceId}</div>-->
        <!-- <div>ProfileId: {prfId}</div>-->
        
        <!-- APPLICATION BUTTONS -->
        <div class="slds-grid slds-grid_align-center slds-gutters_xx-large">
            <div class="slds-col">   
                <lightning-button
                    variant="brand"
                    label={newAppSustainFund}
                    title={newAppSustainFund}
                    onclick={handleNewAppSustain}
                    class="slds-var-m-left_small bff-button-brand"
                    disabled={disableButton}>
                </lightning-button>
            </div>
        </div>
        <br/>

        <div class="slds-grid slds-grid_align-center slds-gutters_xx-large slds-var-m-bottom_x-large">
            <div class="slds-col">   
                <lightning-button
                    variant="brand"
                    label={newAppSolidarityFund}
                    title={newAppSolidarityFund}
                    onclick={handleNewAppSolidarity}
                    class="slds-var-m-left_small bff-button-brand"
                    disabled={disableButton}
                    >
                </lightning-button>
            </div>
        </div>

        <!-- PROPOSALS -->
        <div if:true={hasProposals}>
        <div class="slds-grid slds-gutters_xx-large slds-var-m-bottom_xx-large">
            <div class="slds-col">
                <div class="slds-text-heading_medium slds-var-m-top_large slds-var-m-bottom_small"><h2>Grant Applications</h2></div>
                    <div class="gfw-item-list">
                        <lightning-datatable 
                            key-field="id" 
                            hide-checkbox-column=true
                            data={prpItemsData}
                            columns={columns}
                            onrowaction={handleRowAction}
                            class="slds-max-medium-table_stacked"
                            sorted-by=statusSortBy
                            sorted-direction={sortedDirection}
                        >
                        </lightning-datatable>
                    </div>
                </div>
            </div>
        </div>


    </div> <!-- Close dataloaded div -->

    </div> <!-- Close lang tag -->
</template>